<!DOCTYPE html>
<html>
<body style="margin: auto;">

<canvas  id="myCanvas" width="800" height="200" style="border:1px solid #d3d3d3;padding: 30px;">
</canvas>

<script>
var demo= document.getElementById("myCanvas");
var ctx = demo.getContext('2d'),
    w = demo.width,
    h = demo.height,

    /// plot x and y, old plot x and y, speed and scan bar width
    speed = 3,
    px = 0, opx = 0, 
    py = h * 0.8, opy = py,
    scanBarWidth = 20;

ctx.strokeStyle = '#00bd00';
ctx.lineWidth = 3;
  

var dt=[  h * 0.8,  h * 0.8,  h * 0.8,  h * 0.8,h * 0.8-40, h * 0.8,  h * 0.8,  h * 0.8,  h * 0.8,h * 0.8+40]
var index=0

/// for demo we use mouse as signal input source    
demo.onmousemove = function(e) {
    if(index<dt.length){
            index=index+1;
        }else{
            index=0
        }
    console.log(dt[index])
    var r = demo.getBoundingClientRect();
    py = dt[index]-(r.top * 0.9);
}
    
loop();
 
function loop() {
       
/// move forward at defined speed
px += speed;

/// clear ahead (scan bar)
ctx.clearRect(px,0, scanBarWidth, h);

/// draw line from old plot point to new
ctx.beginPath();
ctx.moveTo(opx, opy);
ctx.lineTo(px, py);
ctx.stroke();

/// update old plot point
opx = px;
opy = py;

/// check if edge is reached and reset position
if (opx > w) {
    px = opx = -speed;
}

requestAnimationFrame(loop);
}
</script>

</body>
</html>
